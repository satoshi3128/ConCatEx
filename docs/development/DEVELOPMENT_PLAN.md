# 開発計画 - お問い合わせフォーム & ロギング機能

**作成日**: 2025-01-20  
**対象**: Concatサイト v1.3.0開発  
**並行作業**: Claude Code + Gemini CLI x2

---

## 🎯 実装目標

### お問い合わせフォーム (優先度: 最高)
- ✅ フロントエンド: 実装済み
- 🔄 バックエンド: API実装済み (要強化)
- ❌ メール送信: 未実装
- ❌ 送信完了画面: 未実装
- ❌ 管理者通知: 未実装

### ロギング機能 (優先度: 高)
- ❌ ロギングポリシー: 未策定
- ❌ アクセスログ: 未実装
- ❌ エラーログ: 未実装
- ❌ フォーム送信ログ: 未実装

---

## 📋 作業分担

### Claude Code (メイン統括)
**役割**: 全体統括・お問い合わせフォーム実装・進捗管理

**担当タスク**:
1. お問い合わせAPI強化 (バリデーション、エラーハンドリング)
2. メール送信機能統合
3. 進捗レビュー (30分間隔)
4. Gemini指示書管理・更新

**成果物**:
- `/api/contact` 強化版
- 統合テスト
- 進捗レポート

### Gemini CLI #1 (ロギング担当)
**役割**: ロギングシステム全体実装

**担当タスク**:
1. ロギングポリシー策定
2. ロギングミドルウェア実装
3. ログ保存・管理機能
4. 自動進捗レポート作成

**成果物**:
- `LOGGING_POLICY.md`
- `middleware/logging.ts`
- `utils/logger.ts`
- 進捗レポート: `LOGGING_PROGRESS.md`

### Gemini CLI #2 (メール機能担当) 
**役割**: お問い合わせフォームメール機能実装

**担当タスク**:
1. メール送信サービス選定・設定
2. メールテンプレート作成
3. 送信完了画面実装
4. 自動進捗レポート作成

**成果物**:
- `utils/email.ts`
- `components/ContactSuccess.tsx`
- メールテンプレート
- 進捗レポート: `EMAIL_PROGRESS.md`

---

## 🔄 自律進捗管理システム

### Gemini自動レポート要件
各Gemini CLIは作業完了後、以下形式で進捗報告：

```markdown
# [担当領域] 進捗レポート
**更新日時**: YYYY-MM-DD HH:MM  
**担当**: Gemini CLI #X

## ✅ 完了タスク
- [ ] タスク名: 詳細説明

## 🔄 進行中タスク  
- [ ] タスク名: 進捗率・課題

## ❌ ブロッカー
- 課題・依存関係・レビュー必要事項

## 📋 次回作業予定
- 次のタスク・優先順位

## 🤝 Claude Codeへの連携事項
- レビュー依頼・確認事項・統合作業
```

### Claude Code定期チェック
- **30分間隔**: 進捗レポート確認
- **1時間間隔**: 統合テスト・レビュー
- **リアルタイム**: ブロッカー解決・指示調整

---

## 🎬 実装フェーズ

### Phase 1: 基盤準備 (30分)
- [Claude] 現状分析・要件整理
- [Gemini #1] ロギングポリシー策定開始
- [Gemini #2] メール送信サービス調査

### Phase 2: 並行実装 (2時間)
- [Claude] お問い合わせAPI強化
- [Gemini #1] ロギングミドルウェア実装
- [Gemini #2] メール機能実装

### Phase 3: 統合・テスト (1時間)
- [Claude] 全機能統合・テスト
- [All] 動作確認・本番デプロイ

### Phase 4: 本番反映 (30分)
- [Claude] Vercelデプロイ・動作確認

---

## 📊 成功指標

### お問い合わせフォーム
- ✅ フォーム送信→メール送信→完了画面の完全フロー
- ✅ エラーハンドリング・ユーザビリティ
- ✅ 本番環境での正常動作

### ロギング機能
- ✅ アクセス・エラー・フォーム送信の全ログ取得
- ✅ 個人情報保護方針遵守
- ✅ パフォーマンス影響最小化

### 自律管理システム
- ✅ 30分間隔での自動進捗更新
- ✅ ブロッカーの迅速解決
- ✅ 3-4時間での完全実装達成

---

**この計画に基づき、効率的な並行開発を実施します。**